				;file E:\Doing\0 音頻口通信\ASSP MCU\hijiack\source code\main.asm
				;1	;___________________________________________________________________
				;2	;___________________________________________________________________
				;3	;Copyright :    2015 by HOLTEK SEMICONDUCTOR INC
				;4	;File Name :    main.asm
				;5	;Targer :       hijack Board
				;6	;MCU :          HT68F002
				;7	;Version :      V00
				;8	;Author :       ChenTing
				;9	;Date :         2015/04/10
				;10	;Description :  hijack 音頻通信測試
				;11	;History : 
				;12	;___________________________________________________________________
				;13	;___________________________________________________________________
				;14	
				;15	include config.inc
				;16	include target.inc
				;17	include hijack.inc
				;18	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;19	;@------------------------Library API------------------------------@
				;20	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;21	EXTERN  _CLEAR_RAM				:NEAR
				;22	EXTERN  _INIT_PORT				:NEAR 
				;23	EXTERN  _INIT_WDT				:NEAR
				;24	EXTERN  _INIT_SysFrequency		:NEAR
				;25	EXTERN  _INIT_LVD				:NEAR
				;26	EXTERN  _IIC_INT_ISR			:NEAR
				;27	EXTERN  _IIC_init				:NEAR
				;28	
				;29	EXTERN  _hijack_Receive			:NEAR
				;30	EXTERN  _hijack_Send			:NEAR
				;31	EXTERN  _hijack_init			:NEAR
				;32	
				;33	EXTERN	hijack_Receive_DataH	:BYTE
				;34	EXTERN	hijack_Receive_DataL	:BYTE
				;35	EXTERN	hijack_Send_Data_High	:BYTE
				;36	EXTERN	hijack_Send_Data_Low	:BYTE
				;37	EXTERN	IIC_Receive_Data 		:BYTE
				;38	EXTERN	IIC_Send_Data 			:BYTE
				;39	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;40	;@------------------------Library API------------------------------@
				;41	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;42	public	F_EMI
				;43	public	R_ATEMP
				;44	public  R_STATUS
				;45	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;46	;@-----------------------------DATA--------------------------------@
				;47	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 
				;48	ds	.section	'data'    
				;49	F_EMI					DBIT
				;50	R_ATEMP					DB	?
				;51	R_STATUS				DB	?
				;52	
				;53	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;54	;@-----------------------------CODE--------------------------------@
				;55	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;56	cs	.section	at  000h	'code'
				;57	        ORG     START_VECTOR
				;58	        SNZ     TO
				CS:
				include HT68F002.inc
0000	3A8A	snz     TO
				;59	        JMP     POWER_ON
0001	2819	jmp     POWER_ON
				;60	        JMP     MAIN
0002	2828	jmp     MAIN
0003	0000	nop
				;61	;ISR VECTOR Defination
				;62	        ORG     INT0_VECTOR
				;63	        JMP		_IIC_INT_ISR		;IIC從機子程序
0004	284E	jmp     _IIC_INT_ISR
				;64	        RETI
0005	0004	reti
0006	0000	nop
0007	0000	nop
				;65	;
				;66	        ORG		Timebase0_VECTOR 
				;67	        RETI
0008	0004	reti
0009	0000	nop
000A	0000	nop
000B	0000	nop
				;68	;
				;69			ORG		Timebase1_VECTOR
				;70			RETI
000C	0004	reti
000D	0000	nop
000E	0000	nop
000F	0000	nop
				;71	;
				;72			ORG		M_FUNCTION0_VECTOR
				;73			JMP		_hijack_Receive
0010	28E1	jmp     _hijack_Receive
				;74			RETI
0011	0004	reti
0012	0000	nop
0013	0000	nop
				;75	;
				;76			ORG		EEPROM_VECTOR
				;77			RETI
0014	0004	reti
0015	0000	nop
0016	0000	nop
0017	0000	nop
				;78	;
				;79			ORG		ADC_VECTOR
				;80			RETI
0018	0004	reti
				;81	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;82						;---------Power ON-------------;
				;83	POWER_ON:
				;84			CALL	_CLEAR_RAM
				POWER_ON:
0019	202F	call    _CLEAR_RAM
				;85			CALL	_INIT_PORT
001A	2037	call    _INIT_PORT
				;86			CALL	_INIT_WDT
001B	2045	call    _INIT_WDT
				;87			CALL	_INIT_SysFrequency
001C	2048	call    _INIT_SysFrequency
				;88			CALL	_INIT_LVD
001D	204B	call    _INIT_LVD
				;89			CALL	_IIC_init
001E	20BB	call    _IIC_init
				;90			CALL	_hijack_init
001F	21EF	call    _hijack_init
				;91			MOV		A,000H
0020	0F00	mov     a, 0H
				;92			MOV		IIC_Send_Data,A
0021	00C5	mov     IIC_SEND_DATA, a
				;93			CLR		PAC3
0022	3595	clr     PAC3
				;94			SET		PA3
0023	3194	set     PA3
				;95			MOV		A,0A5H
0024	0FA5	mov     a, A5H
				;96			MOV		hijack_Send_Data_High,A
0025	00CC	mov     HIJACK_SEND_DATA_HIGH, a
				;97			MOV		A,05AH
0026	0F5A	mov     a, 5AH
				;98			MOV		hijack_Send_Data_Low,A
0027	00CD	mov     HIJACK_SEND_DATA_LOW, a
				;99			
				;100	MAIN:
				;101	
				;102			CLR		WDT
				MAIN:
0028	0001	clr     wdt
				;103			CLR		WDT1
0029	0001	clr     wdt
				;104			CLR		WDT2
002A	0005	clr     wdt2
				;105			NOP
002B	0000	nop
				;106			CLR		EMI
002C	340E	clr     EMI
				;107			CALL	_hijack_Send
002D	20C5	call    _hijack_Send
				;108		
				;109			JMP		MAIN
002E	2828	jmp     MAIN
				;110	
				;111	
				;file E:\Doing\0 音頻口通信\ASSP MCU\hijiack\source code\sysyinit.asm
				;1	;___________________________________________________________________
				;2	;___________________________________________________________________
				;3	;Copyright :    2015 by HOLTEK SEMICONDUCTOR INC
				;4	;File Name :    sysinit.asm
				;5	;Targer :       hijack TEST Board
				;6	;MCU :          HT68F002
				;7	;Version :      V00
				;8	;Author :       ChenTing
				;9	;Date :         2015/04/10
				;10	;Description :  音頻通信程序測試
				;11	;				系統初始化程序
				;12	;History : 
				;13	;___________________________________________________________________
				;14	;___________________________________________________________________
				;15	include config.inc
				;16	include target.inc
				;17	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;18	;@---------------------Library API------------------------------@
				;19	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 
				;20	Public 	_CLEAR_RAM
				;21	Public 	_INIT_PORT
				;22	Public	_INIT_WDT
				;23	public  _INIT_SysFrequency
				;24	public  _INIT_LVD
				;25	
				;26	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;27	
				;28							;-----------Clear RAM----------;
				;29	;@SUBROUTINE
				;30	;HT66F4540 , bank0:40h-FFh  )
				;31	_CLEAR_RAM PROC
				;32	        mov     A,040H          
				_CLEAR_RAM:
002F	0F40	mov     a, 40H
				;33	        mov     MP0,A           
0030	0081	mov     MP0, a
				;34	        mov     A,64d          
0031	0F40	mov     a, 40H
				;35	CLEAR_RAM_LOOP:                    
				;36	        clr     IAR0            
				CLEAR_RAM_LOOP:
0032	1F00	clr     [00H]
				;37	        inc     MP0             
0033	1481	inc     MP0
				;38	        SDZ     ACC             
0034	1785	sdz     ACC
				;39	        JMP     CLEAR_RAM_LOOP     
0035	2832	jmp     CLEAR_RAM_LOOP
				;40	        RET
0036	0003	ret
				;41	_CLEAR_RAM ENDP
				;42	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;43							;----------Initial Port----------;
				;44	;SUBROUTINE
				;45	_INIT_PORT PROC
				;46	        MOV     A,00H
				_INIT_PORT:
0037	0F00	mov     a, 0H
				;47	        MOV     PA,A        
0038	0094	mov     PA, a
				;48	        MOV     A,00H
0039	0F00	mov     a, 0H
				;49	        MOV     PAC,A      
003A	0095	mov     PAC, a
				;50	        MOV		A,00H
003B	0F00	mov     a, 0H
				;51	        MOV		PAPU,A       
003C	0096	mov     PAPU, a
				;52	        MOV		A,00H
003D	0F00	mov     a, 0H
				;53	        MOV		PAWU,A
003E	0097	mov     PAWU, a
				;54	
				;55			MOV		A,00H
003F	0F00	mov     a, 0H
				;56			MOV		PASR,A
0040	00A6	mov     PASR, a
				;57	
				;58			SET		PAC6		
0041	3315	set     PAC6
				;59			SET		PAC1
0042	3095	set     PAC1
				;60			SET		PAWU1	        	
0043	3097	set     PAWU1
				;61	        RET
0044	0003	ret
				;62	_INIT_PORT ENDP
				;63	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;64							;----------Initial WDTC----------;
				;65	;SUBROUTINE
				;66	_INIT_WDT PROC
				;67		    MOV		A,WDT_Function_Default
				_INIT_WDT:
0045	0F53	mov     a, 53H
				;68		    MOV		WDTC,A    	
0046	0099	mov     WDTC, a
				;69	        RET
0047	0003	ret
				;70	_INIT_WDT ENDP
				;71	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       
				;72							;----------Initial SysFrequency----------;
				;73	;SUBROUTINE
				;74	_INIT_SysFrequency PROC
				;75		    MOV		A,SYSFrequency_Default
				_INIT_SysFrequency:
0048	0FE0	mov     a, E0H
				;76		    MOV		SMOD,A    	
0049	008B	mov     SMOD, a
				;77	        RET
004A	0003	ret
				;78	_INIT_SysFrequency ENDP
				;79	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  
				;80							;----------Initial LVD----------;
				;81	;SUBROUTINE
				;82	_INIT_LVD PROC
				;83		    MOV		A,LVD_Voltage_Default
				_INIT_LVD:
004B	0F11	mov     a, 11H
				;84		    MOV		LVDC,A    	
004C	008C	mov     LVDC, a
				;85	        RET
004D	0003	ret
				;86	_INIT_LVD ENDP
				;87	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  
				;88							;----------Initial EMI----------;
				;89	;SUBROUTINE
				;90	;_INIT_LVD PROC
				;91	;	    MOV		A,LVD_Voltage_Default
				;92	;	    MOV		LVDC,A    	
				;93	;        RET
				;94	;_INIT_LVD ENDP
				;95	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 
				;file E:\Doing\0 音頻口通信\ASSP MCU\hijiack\source code\IIC_Slave.asm
				;1	;___________________________________________________________________
				;2	;___________________________________________________________________
				;3	;Copyright :    2015 by HOLTEK SEMICONDUCTOR INC
				;4	;File Name :    sysinit.asm
				;5	;Targer :       hijack TEST Board
				;6	;MCU :          HT68F002
				;7	;Version :      V00
				;8	;Author :       ChenTing
				;9	;Date :         2015/04/10
				;10	;Description :  音頻通信程序測試
				;11	;				IIC_Slave程序
				;12	;History : 
				;13	;___________________________________________________________________
				;14	;___________________________________________________________________
				;15	include config.inc
				;16	include target.inc
				;17	
				;18	#define IIC_Device_Addr_Default 028H
				;19	#define IIC_Time_Out_Count		200
				;20	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;21	;@---------------------Library API------------------------------@
				;22	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 
				;23	EXTERN	R_STATUS 			:BYTE
				;24	EXTERN	R_ATEMP 			:BYTE
				;25	
				;26	Public 	_IIC_INT_ISR
				;27	public  IIC_Receive_Data
				;28	public	IIC_Send_Data
				;29	public  _IIC_init
				;30	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;31	;@------------------------------DATA----------------------------@
				;32	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;33	rambank 0  IIC_Slave_datal
				;34	IIC_Slave_datal	.section	'data'   
				;35	
				;36	IIC_Device_Addr			DB	?
				;37	IIC_Receive_Data		DB	?
				;38	IIC_Send_Data			DB	?
				;39	IIC_temp_conunt1		DB	?
				;40	IIC_temp_conunt2		DB	?
				;41	IIC_temp_BYTE			DB	?
				;42	IIC_temp_Flag			DBIT
				;43	
				;44	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;45	;@-------------------------------CODE---------------------------@
				;46	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;47	IIC_Slave_code	.section	'code' 
				;48	
				;49	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;50	 _IIC_INT_ISR PROC
				;51	 		PUSH
				_IIC_INT_ISR:
				IIC_SLAVE_CODE:
004E	00C1	mov     R_ATEMP, a
004F	070A	mov     a, STATUS
0050	00C2	mov     R_STATUS, a
				;52	 		CLR		INTE
0051	348E	clr     INTE
				;53	;判斷是否為有效start信號
				;54			SNZ		IIC_SCL		
0052	3A14	snz     PA4
				;55			JMP		_IIC_RET				;SDA下降沿的時候，SCL為low，不是IIC start信號
0053	286B	jmp     _IIC_RET
				;56	;讀取Device address
				;57			CALL	_IIC_Read_BYTEData		;讀取IIC 主機發送過來的設備地址
0054	2071	call    _IIC_Read_BYTEData
				;58	Device_Addr_Judge:	;判斷地址是否匹配
				;59			MOV		A,IIC_temp_BYTE
				Device_Addr_Judge:
0055	0748	mov     a, IIC_TEMP_BYTE
				;60			MOV		IIC_Device_Addr,A
0056	00C3	mov     IIC_DEVICE_ADDR, a
				;61			MOV		A,0feH					;取出地址數據		
0057	0FFE	mov     a, FEH
				;62			AND		A,IIC_Device_Addr
0058	0643	and     a, IIC_DEVICE_ADDR
				;63			XOR		A,IIC_Device_Addr_Default
0059	0C28	xor     a, 28H
				;64			SNZ		Z
005A	390A	snz     Z
				;65			JMP		_IIC_RET				;地址不匹配，則退出
005B	286B	jmp     _IIC_RET
				;66	;地址匹配，發送ACK給主機
				;67			CALL	IIC_Ack					;收到設備地址，對設備地址ACK應答		
005C	20A9	call    IIC_Ack
				;68	;地址匹配，判斷主機需要讀取數據還是寫入數據
				;69			MOV		A,01H					;取出地址數據		
005D	0F01	mov     a, 1H
				;70			AND		A,IIC_Device_Addr
005E	0643	and     a, IIC_DEVICE_ADDR
				;71			SZ		ACC
005F	1085	sz      ACC
				;72			JMP		IIC_Master_Read			;主機需要讀取數據
0060	2862	jmp     IIC_Master_Read
				;73			JMP		IIC_Master_Write		;主機需要寫入數據
0061	2867	jmp     IIC_Master_Write
				;74	IIC_Master_Read:
				;75			MOV		A,IIC_Send_Data
				IIC_Master_Read:
0062	0745	mov     a, IIC_SEND_DATA
				;76			MOV		IIC_temp_BYTE,A
0063	00C8	mov     IIC_TEMP_BYTE, a
				;77			CALL	_IIC_Write_BYTEData
0064	208D	call    _IIC_Write_BYTEData
				;78	;TEST START
				;79	TEST:;20150423
				;80			INC		IIC_Send_Data
				TEST:
0065	14C5	inc     IIC_SEND_DATA
				;81	;TEST END
				;82	;目前就完成單個字節的讀寫操作
				;83			JMP		_IIC_RET
0066	286B	jmp     _IIC_RET
				;84	IIC_Master_Write:		
				;85			CALL	_IIC_Read_BYTEData
				IIC_Master_Write:
0067	2071	call    _IIC_Read_BYTEData
				;86			MOV		A,IIC_temp_BYTE
0068	0748	mov     a, IIC_TEMP_BYTE
				;87			MOV		IIC_Receive_Data,A
0069	00C4	mov     IIC_RECEIVE_DATA, a
				;88	;;目前就完成單個字節的讀寫操作
				;89			JMP		_IIC_RET
006A	286B	jmp     _IIC_RET
				;90	_IIC_RET:
				;91			SET		INTE
				_IIC_RET:
006B	308E	set     INTE
				;92			CLR		INTF
006C	360E	clr     INTF
				;93	;		SET		EMI
				;94			POP
006D	0742	mov     a, R_STATUS
006E	008A	mov     STATUS, a
006F	0741	mov     a, R_ATEMP
				;95			RETI
0070	0004	reti
				;96	_IIC_INT_ISR ENDP
				;97	
				;98	
				;99	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@	
				;100	_IIC_Read_BYTEData PROC
				;101			SET		IIC_SDA_IO
				_IIC_Read_BYTEData:
0071	3295	set     PAC5
				;102			MOV 	A,9 				;SET 8 BIT COUNTER
0072	0F09	mov     a, 9H
				;103			MOV 	IIC_temp_conunt1,A	
0073	00C6	mov     IIC_TEMP_CONUNT1, a
				;104			CLR		IIC_temp_BYTE
0074	1F48	clr     IIC_TEMP_BYTE
				;105	IIC_Read_LOOP:	
				;106			SDZ 	IIC_temp_conunt1 	;8bit值是否已經讀取完成
				IIC_Read_LOOP:
0075	17C6	sdz     IIC_TEMP_CONUNT1
				;107			JMP		IIC_Read_BYTEData_LOOP
0076	2878	jmp     IIC_Read_BYTEData_LOOP
				;108			RET
0077	0003	ret
				;109	IIC_Read_BYTEData_LOOP:	
				;110			RL	 	IIC_temp_BYTE		;高位在前
				IIC_Read_BYTEData_LOOP:
0078	18C8	rl      IIC_TEMP_BYTE
				;111			MOV		A,IIC_Time_Out_Count;config time out value
0079	0FC8	mov     a, C8H
				;112			MOV		IIC_temp_conunt2,A		
007A	00C7	mov     IIC_TEMP_CONUNT2, a
				;113	$1:						
				;114			SZ		IIC_SCL				;SCL低電平狀態就等待
				L007B:
007B	3E14	sz      PA4
				;115			JMP		$2
007C	2880	jmp     L0080
				;116			SDZ		IIC_temp_conunt2
007D	17C7	sdz     IIC_TEMP_CONUNT2
				;117			JMP		$1
007E	287B	jmp     L007B
				;118			RET
007F	0003	ret
				;119	$2:					
				;120			SNZ		IIC_SDA				;讀取到來的data值
				L0080:
0080	3A94	snz     PA5
				;121			JMP		SDA_LOW0
0081	2885	jmp     SDA_LOW0
				;122			JMP		SDA_HIGH0
0082	2883	jmp     SDA_HIGH0
				;123	SDA_HIGH0:
				;124			SET		IIC_temp_BYTE.0
				SDA_HIGH0:
0083	3048	set     IIC_TEMP_BYTE.0
				;125			JMP		IIC_Read_Next					
0084	2886	jmp     IIC_Read_Next
				;126	SDA_LOW0:
				;127			CLR		IIC_temp_BYTE.0
				SDA_LOW0:
0085	3448	clr     IIC_TEMP_BYTE.0
				;128	IIC_Read_Next:		
				;129			MOV		A,IIC_Time_Out_Count
				IIC_Read_Next:
0086	0FC8	mov     a, C8H
				;130			MOV		IIC_temp_conunt2,A
0087	00C7	mov     IIC_TEMP_CONUNT2, a
				;131	$1:					
				;132			SNZ		IIC_SCL				;SCL高電平就等待
				L0088:
0088	3A14	snz     PA4
				;133			JMP		IIC_Read_LOOP
0089	2875	jmp     IIC_Read_LOOP
				;134			SDZ		IIC_temp_conunt2
008A	17C7	sdz     IIC_TEMP_CONUNT2
				;135			JMP		$1		
008B	2888	jmp     L0088
				;136			RET	
008C	0003	ret
				;137	_IIC_Read_BYTEData ENDP
				;138	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;139	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@	
				;140	_IIC_Write_BYTEData PROC
				;141			CLR		IIC_SDA_IO
				_IIC_Write_BYTEData:
008D	3695	clr     PAC5
				;142			MOV 	A,8 ;SET 8 BIT COUNTER
008E	0F08	mov     a, 8H
				;143			MOV 	IIC_temp_conunt1,A
008F	00C6	mov     IIC_TEMP_CONUNT1, a
				;144			MOV		A,IIC_Time_Out_Count
0090	0FC8	mov     a, C8H
				;145			MOV		IIC_temp_conunt2,A						
0091	00C7	mov     IIC_TEMP_CONUNT2, a
				;146	IIC_Write_BYTEData_LOOP:
				;147			SZ		IIC_SCL				;SCL低電平狀態就等待
				IIC_Write_BYTEData_LOOP:
0092	3E14	sz      PA4
				;148			JMP		$2
0093	2897	jmp     L0097
				;149			SDZ		IIC_temp_conunt2
0094	17C7	sdz     IIC_TEMP_CONUNT2
				;150			JMP		IIC_Write_BYTEData_LOOP
0095	2892	jmp     IIC_Write_BYTEData_LOOP
				;151			RET
0096	0003	ret
				;152	$2:			
				;153	;		MOV		A,80H				;取出地址數據		
				;154	;		AND		A,IIC_temp_BYTE
				;155	;		SZ		ACC
				;156			SZ		IIC_temp_BYTE.7
				L0097:
0097	3FC8	sz      IIC_TEMP_BYTE.7
				;157			JMP		SDA_HIGH1
0098	289A	jmp     SDA_HIGH1
				;158			JMP		SDA_LOW1
0099	289C	jmp     SDA_LOW1
				;159	SDA_HIGH1:
				;160			SET		IIC_SDA
				SDA_HIGH1:
009A	3294	set     PA5
				;161			JMP		Write_Next_Bit
009B	289D	jmp     Write_Next_Bit
				;162	SDA_LOW1:
				;163			CLR		IIC_SDA
				SDA_LOW1:
009C	3694	clr     PA5
				;164	Write_Next_Bit:
				;165			MOV		A,IIC_Time_Out_Count
				Write_Next_Bit:
009D	0FC8	mov     a, C8H
				;166			MOV		IIC_temp_conunt2,A	
009E	00C7	mov     IIC_TEMP_CONUNT2, a
				;167	$2:					
				;168			SNZ		IIC_SCL				;SCL高電平就等待
				L009F:
009F	3A14	snz     PA4
				;169			JMP		$1
00A0	28A4	jmp     L00A4
				;170			SDZ		IIC_temp_conunt2
00A1	17C7	sdz     IIC_TEMP_CONUNT2
				;171			JMP		$2
00A2	289F	jmp     L009F
				;172			RET		
00A3	0003	ret
				;173	$1:		
				;174	;		SET		IIC_SDA_IO				;讓出數據線
				;175			RL		IIC_temp_BYTE
				L00A4:
00A4	18C8	rl      IIC_TEMP_BYTE
				;176			SDZ 	IIC_temp_conunt1 	;8bit值是否已經讀取完成
00A5	17C6	sdz     IIC_TEMP_CONUNT1
				;177			JMP		IIC_Write_BYTEData_LOOP
00A6	2892	jmp     IIC_Write_BYTEData_LOOP
				;178			SET		IIC_SDA_IO				;讓出數據線
00A7	3295	set     PAC5
				;179			RET	
00A8	0003	ret
				;180	_IIC_Write_BYTEData ENDP
				;181	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;182	IIC_Ack PROC
				;183	;應答信號，保證在兩個時鐘條邊沿SDA為低，則主機認為是從機應答
				;184			CLR		IIC_SDA_IO			;config SDA output
				IIC_Ack:
00A9	3695	clr     PAC5
				;185			MOV		A,IIC_Time_Out_Count
00AA	0FC8	mov     a, C8H
				;186			MOV		IIC_temp_conunt2,A
00AB	00C7	mov     IIC_TEMP_CONUNT2, a
				;187	$1:
				;188			SZ		IIC_SCL				;低電平就等待
				L00AC:
00AC	3E14	sz      PA4
				;189			JMP		$2
00AD	28B1	jmp     L00B1
				;190			SDZ		IIC_temp_conunt2
00AE	17C7	sdz     IIC_TEMP_CONUNT2
				;191			JMP		$1
00AF	28AC	jmp     L00AC
				;192			RET
00B0	0003	ret
				;193	$2:			
				;194			CLR		IIC_SDA		;第9個CLK變高的情況下，SDA輸出0
				L00B1:
00B1	3694	clr     PA5
				;195			MOV		A,IIC_Time_Out_Count
00B2	0FC8	mov     a, C8H
				;196			MOV		IIC_temp_conunt2,A
00B3	00C7	mov     IIC_TEMP_CONUNT2, a
				;197	$3:				
				;198			SNZ		IIC_SCL
				L00B4:
00B4	3A14	snz     PA4
				;199			JMP		$4
00B5	28B9	jmp     L00B9
				;200			SDZ		IIC_temp_conunt2
00B6	17C7	sdz     IIC_TEMP_CONUNT2
				;201			JMP		$3
00B7	28B4	jmp     L00B4
				;202			RET
00B8	0003	ret
				;203	$4:				
				;204			SET		IIC_SDA_IO		;第9個CLK變低的情況下，釋放總線
				L00B9:
00B9	3295	set     PAC5
				;205			RET
00BA	0003	ret
				;206	IIC_Ack ENDP
				;207	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;208	_IIC_init PROC
				;209			CLR		IIC_SDA
				_IIC_init:
00BB	3694	clr     PA5
				;210			SET		IIC_SDA_IO		;輸出話IO口設定
00BC	3295	set     PAC5
				;211			SET		IIC_SCL_IO	
00BD	3215	set     PAC4
				;212			CLR		IIC_SCL
00BE	3614	clr     PA4
				;213			
				;214	
				;215			MOV		A,INT0_Default	;config INT觸發中斷
00BF	0F03	mov     a, 3H
				;216			MOV		INTEG,A
00C0	008D	mov     INTEG, a
				;217			CLR		INTF
00C1	360E	clr     INTF
				;218			SET		INTE
00C2	308E	set     INTE
				;219			SET		EMI				;使能INT
00C3	300E	set     EMI
				;220					
				;221			RET
00C4	0003	ret
				;222	_IIC_init ENDP
				;223	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;224	
				;file E:\Doing\0 音頻口通信\ASSP MCU\hijiack\source code\hijack.asm
				;1	;___________________________________________________________________
				;2	;___________________________________________________________________
				;3	;Copyright :    2015 by HOLTEK SEMICONDUCTOR INC
				;4	;File Name :    hijack.asm
				;5	;Targer :       hijack TEST Board
				;6	;MCU :          HT68F002
				;7	;Version :      V00
				;8	;Author :       ChenTing
				;9	;Date :         2015/04/10
				;10	;Description :  音頻通信程序測試
				;11	;				音頻通信主要程序
				;12	;History : 
				;13	;___________________________________________________________________
				;14	;___________________________________________________________________
				;15	include config.inc
				;16	include target.inc
				;17	include hijack.inc
				;18	;#define IIC_Device_Addr_Default 0A0H
				;19	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;20	;@---------------------Library API------------------------------@
				;21	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;22	EXTERN	F_EMI 		:BIT
				;23	EXTERN	R_STATUS 			:BYTE
				;24	EXTERN	R_ATEMP 			:BYTE
				;25	 
				;26	public  _hijack_init
				;27	Public 	_hijack_Receive
				;28	public  _hijack_Send
				;29	
				;30	public	hijack_Send_Data_High
				;31	public	hijack_Send_Data_Low
				;32	public	hijack_Receive_DataH
				;33	public	hijack_Receive_DataL
				;34	
				;35	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;36	;@------------------------------DATA----------------------------@
				;37	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;38	rambank 0  hijack_datal
				;39	hijack_datal	.section	'data'   
				;40	
				;41	hijack_Receive_DataH		DB	?
				;42	hijack_Receive_DataL		DB	?
				;43	hijack_Send_Data_High		DB	?
				;44	hijack_Send_Data_Low		DB	?
				;45	hijack_temp_Byte			DB	?
				;46	hijack_temp_count1			DB	?
				;47	hijack_temp_count2			DB	?
				;48	hijack_CCRP_count			DB	?
				;49	hijack_Rx_step				DB	?
				;50	high_CCRA1_H				DB	?
				;51	high_CCRA1_L				DB	?
				;52	high_CCRA2_H				DB	?
				;53	high_CCRA2_L				DB	?
				;54	hijack_Period_H				DB	?
				;55	hijack_Period_L				DB	?
				;56	TEST_COUNT					DB	?
				;57	TEST_COUNT2					DB	?
				;58	TEST_COUNT3					DB	?
				;59	hijack_Idle_Count			DB	?
				;60	hijack_Rx_Count				DB	?
				;61	hijack_Rx_Parity_Count		DB	?
				;62	
				;63	F_First_CCRA				DBIT
				;64	F_hijack_Rx_Error			DBIT
				;65	F_hijack_Rx_Start			DBIT
				;66	F_CompleteRx1Bit			DBIT
				;67	F_0or1Bit					DBIT
				;68	F_PrepareMode				DBIT
				;69	F_IdleMode					DBIT
				;70	F_ByteMode					DBIT
				;71	F_hijackstartOk				DBIT
				;72	F_Parity_StopMode			DBIT
				;73	F_Parity_Ok					DBIT
				;74	F_Stop_idleMode				DBIT
				;75	F_First_Parity_StopMode		DBIT
				;76	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;77	;@-------------------------------CODE---------------------------@
				;78	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;79	hijack_code	.section	'code' 
				;80	
				;81	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;82	_hijack_Send PROC
				;83			CLR		IIC_SCL_IO;
				_hijack_Send:
				HIJACK_CODE:
00C5	3615	clr     PAC4
				;84			CLR		IIC_SCL		;hijack發送數據的時候拉低SCL，不接收IICdata
00C6	3614	clr     PA4
				;85			SNZ		EMI
00C7	380E	snz     EMI
				;86			JMP		$1
00C8	28CB	jmp     L00CB
				;87			SET		F_EMI
00C9	3040	set     [040H].0
				;88			JMP		$2			
00CA	28CD	jmp     L00CD
				;89	$1:		
				;90			CLR		F_EMI		
				L00CB:
00CB	3440	clr     [040H].0
				;91			JMP		$2
00CC	28CD	jmp     L00CD
				;92	$2:		
				;93			CLR		EMI		;關閉總中斷，防止其他程序打斷
				L00CD:
00CD	340E	clr     EMI
				;94			CLR		hijack_channel_MIC_IO 
00CE	3515	clr     PAC2
				;95			SET		hijack_channel_MIC
00CF	3114	set     PA2
				;96	;建立Bias信號 12bit 0
				;97			CALL	_hijack_Send_Bias		
00D0	2237	call    _hijack_Send_Bias
				;98	;idel信號     3bit  1
				;99			CALL	_hijack_Send_Idle
00D1	2246	call    _hijack_Send_Idle
				;100	;start信號	  1bit  0
				;101			CALL	_hijack_Send_Start				
00D2	2255	call    _hijack_Send_Start
				;102	;發送2Byte data + 奇校驗
				;103	 		CLR		hijack_temp_count2		;作為奇偶校驗位計數
00D3	1F50	clr     HIJACK_TEMP_COUNT2
				;104			MOV		A,hijack_Send_Data_High
00D4	074C	mov     a, HIJACK_SEND_DATA_HIGH
				;105			MOV		hijack_temp_Byte,A
00D5	00CE	mov     HIJACK_TEMP_BYTE, a
				;106			CALL	_hijack_Send_Byte
00D6	21FF	call    _hijack_Send_Byte
				;107			MOV		A,hijack_Send_Data_Low
00D7	074D	mov     a, HIJACK_SEND_DATA_LOW
				;108			MOV		hijack_temp_Byte,A		
00D8	00CE	mov     HIJACK_TEMP_BYTE, a
				;109			CALL	_hijack_Send_Byte
00D9	21FF	call    _hijack_Send_Byte
				;110					
				;111	;stop信號	  1bit 1
				;112			CALL	_hijack_Send_Stop
00DA	2260	call    _hijack_Send_Stop
				;113	;3bit結束信號
				;114			CALL	_hijack_Send_Idle
00DB	2246	call    _hijack_Send_Idle
				;115	
				;116			SNZ		F_EMI
00DC	3840	snz     [040H].0
				;117			JMP		_hijack_Send_RET
00DD	28DF	jmp     _hijack_Send_RET
				;118			SET		EMI			;開啟EMI，
00DE	300E	set     EMI
				;119	_hijack_Send_RET:
				;120			CLR		F_EMI
				_hijack_Send_RET:
00DF	3440	clr     [040H].0
				;121			RET 
00E0	0003	ret
				;122	_hijack_Send ENDP
				;123	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;124	;						_hijack_Receive	Start							@
				;125	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;126	_hijack_Receive PROC
				;127			PUSH
				_hijack_Receive:
00E1	00C1	mov     R_ATEMP, a
00E2	070A	mov     a, STATUS
00E3	00C2	mov     R_STATUS, a
				;128			SNZ		F_hijack_Rx_Start
00E4	395F	snz     HIJACK_RX_PARITY_COUNT[1].2
				;129			JMP		hijack_Normal_Mode
00E5	28F9	jmp     hijack_Normal_Mode
				;130	hijack_Rx_Mode:		
				;131			CALL	_hijack_Rx_1Bit		
				hijack_Rx_Mode:
00E6	2181	call    _hijack_Rx_1Bit
				;132			CALL	_hijack_PrepareMode	
00E7	212F	call    _hijack_PrepareMode
				;133			CALL	_hijack_StartIdleMode		
00E8	2139	call    _hijack_StartIdleMode
				;134			CALL	_hijack_Rx_Byte				
00E9	215D	call    _hijack_Rx_Byte
				;135			CALL	_hijack_Parity_StopMode
00EA	2112	call    _hijack_Parity_StopMode
				;136			CALL	_hijack_ENDIdleMode
00EB	214B	call    _hijack_ENDIdleMode
				;137			
				;138			SNZ		F_hijack_Rx_Error
00EC	38DF	snz     HIJACK_RX_PARITY_COUNT[1].1
				;139			JMP		_hijack_Receive_RET
00ED	290E	jmp     _hijack_Receive_RET
				;140			CLR		F_First_CCRA
00EE	345F	clr     HIJACK_RX_PARITY_COUNT[1].0
				;141			CLR		F_hijack_Rx_Error
00EF	34DF	clr     HIJACK_RX_PARITY_COUNT[1].1
				;142			CLR		TEST_COUNT
00F0	1F59	clr     TEST_COUNT
				;143			CLR		TEST_COUNT2
00F1	1F5A	clr     TEST_COUNT2
				;144			CLR		F_ByteMode
00F2	37DF	clr     HIJACK_RX_PARITY_COUNT[1].7
				;145			CLR		F_CompleteRx1Bit
00F3	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;146			CLR		F_IdleMode
00F4	375F	clr     HIJACK_RX_PARITY_COUNT[1].6
				;147			CLR		F_PrepareMode
00F5	36DF	clr     HIJACK_RX_PARITY_COUNT[1].5
				;148			CLR		F_hijack_Rx_Start
00F6	355F	clr     HIJACK_RX_PARITY_COUNT[1].2
				;149			CLR		F_hijackstartOk
00F7	3460	clr     HIJACK_RX_PARITY_COUNT[2].0
				;150			JMP		_hijack_Receive_RET
00F8	290E	jmp     _hijack_Receive_RET
				;151	
				;152	
				;153			
				;154	hijack_Normal_Mode:	
				;155			SNZ		STMA0F
				hijack_Normal_Mode:
00F9	3A91	snz     STMA0F
				;156			JMP		_hijack_Normal_CCRP_RET	;(not hijack Rx mode)& (not CCRA interrupt) = normal CCRP interrupt
00FA	290B	jmp     _hijack_Normal_CCRP_RET
				;157	;;第一次進入CCRA中斷，初始化相關設置	init hijack Rx Value
				;158			MOV		A,00001000B
00FB	0F08	mov     a, 8H
				;159			XORM	A,PA
00FC	0494	xorm    a, PA
				;160			CLR		STMA0F		
00FD	3691	clr     STMA0F
				;161			SET		F_First_CCRA
00FE	305F	set     HIJACK_RX_PARITY_COUNT[1].0
				;162			CLR		hijack_CCRP_count	
00FF	1F51	clr     HIJACK_CCRP_COUNT
				;163			MOV		A,STM0AH					;Save CCRA value
0100	072D	mov     a, STM0AH
				;164			MOV		high_CCRA1_H,A	;
0101	00D3	mov     HIGH_CCRA1_H, a
				;165			MOV		A,STM0AL					;
0102	072C	mov     a, STM0AL
				;166			MOV		high_CCRA1_L,A	;
0103	00D4	mov     HIGH_CCRA1_L, a
				;167			INC		TEST_COUNT3
0104	14DB	inc     TEST_COUNT3
				;168			SET		F_hijack_Rx_Start
0105	315F	set     HIJACK_RX_PARITY_COUNT[1].2
				;169			SET		F_PrepareMode
0106	32DF	set     HIJACK_RX_PARITY_COUNT[1].5
				;170			MOV		A,3
0107	0F03	mov     a, 3H
				;171			MOV		hijack_Idle_Count,A
0108	00DC	mov     HIJACK_IDLE_COUNT, a
				;172			CLR		F_hijack_Rx_Error				
0109	34DF	clr     HIJACK_RX_PARITY_COUNT[1].1
				;173			JMP		_hijack_Receive_RET			
010A	290E	jmp     _hijack_Receive_RET
				;174	_hijack_Normal_CCRP_RET:
				;175			SNZ		STMP0F					;CCRP_interrupt也不是 CCRP_interrupt中斷，錯誤
				_hijack_Normal_CCRP_RET:
010B	3A11	snz     STMP0F
				;176			SET		F_hijack_Rx_Error
010C	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;177			CLR		STMP0F		
010D	3611	clr     STMP0F
				;178	_hijack_Receive_RET:
				;179			
				;180			POP		
				_hijack_Receive_RET:
010E	0742	mov     a, R_STATUS
010F	008A	mov     STATUS, a
0110	0741	mov     a, R_ATEMP
				;181			RETI 
0111	0004	reti
				;182	_hijack_Receive ENDP
				;183	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;184	;					_hijack_Receive	End		    						@
				;185	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;186	_hijack_Parity_StopMode PROC
				;187			SNZ		F_Parity_StopMode
				_hijack_Parity_StopMode:
0112	38E0	snz     HIJACK_RX_PARITY_COUNT[2].1
				;188			RET
0113	0003	ret
				;189			SNZ		F_CompleteRx1Bit
0114	39DF	snz     HIJACK_RX_PARITY_COUNT[1].3
				;190			RET
0115	0003	ret
				;191			CLR		F_CompleteRx1Bit
0116	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;192			
				;193			SZ		F_Parity_Ok
0117	3D60	sz      HIJACK_RX_PARITY_COUNT[2].2
				;194			JMP		Stop_Deal					
0118	2924	jmp     Stop_Deal
				;195			SNZ		hijack_Rx_Parity_Count.0
0119	385E	snz     HIJACK_RX_PARITY_COUNT.0
				;196			JMP		Paritylow
011A	2920	jmp     ParityLow
				;197			JMP		ParityHigh
011B	291C	jmp     ParityHigh
				;198	ParityHigh:	
				;199			SNZ		F_0or1Bit
				ParityHigh:
011C	3A5F	snz     HIJACK_RX_PARITY_COUNT[1].4
				;200			JMP		_hijack_Parity_StopMode_Error
011D	292C	jmp     _hijack_Parity_StopMode_Error
				;201			SET		F_Parity_Ok
011E	3160	set     HIJACK_RX_PARITY_COUNT[2].2
				;202			JMP		_hijack_Parity_StopMode_RET					
011F	292E	jmp     _hijack_Parity_StopMode_RET
				;203	ParityLow:		
				;204			SZ		F_0or1Bit
				ParityLow:
0120	3E5F	sz      HIJACK_RX_PARITY_COUNT[1].4
				;205			JMP		_hijack_Parity_StopMode_Error
0121	292C	jmp     _hijack_Parity_StopMode_Error
				;206			SET		F_Parity_Ok
0122	3160	set     HIJACK_RX_PARITY_COUNT[2].2
				;207			JMP		_hijack_Parity_StopMode_RET			
0123	292E	jmp     _hijack_Parity_StopMode_RET
				;208	Stop_Deal:
				;209			CLR		F_Parity_Ok
				Stop_Deal:
0124	3560	clr     HIJACK_RX_PARITY_COUNT[2].2
				;210			SNZ		F_0or1Bit
0125	3A5F	snz     HIJACK_RX_PARITY_COUNT[1].4
				;211			JMP		_hijack_Parity_StopMode_Error
0126	292C	jmp     _hijack_Parity_StopMode_Error
				;212			SET		F_Stop_idleMode
0127	31E0	set     HIJACK_RX_PARITY_COUNT[2].3
				;213			MOV		A,3
0128	0F03	mov     a, 3H
				;214			MOV		hijack_Idle_Count,A
0129	00DC	mov     HIJACK_IDLE_COUNT, a
				;215			CLR		F_Parity_StopMode				
012A	34E0	clr     HIJACK_RX_PARITY_COUNT[2].1
				;216			JMP		_hijack_Parity_StopMode_RET
012B	292E	jmp     _hijack_Parity_StopMode_RET
				;217	_hijack_Parity_StopMode_Error:
				;218			SET		F_hijack_Rx_Error
				_hijack_Parity_StopMode_Error:
012C	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;219			RET	
012D	0003	ret
				;220	_hijack_Parity_StopMode_RET:			
				;221			RET
				_hijack_Parity_StopMode_RET:
012E	0003	ret
				;222	_hijack_Parity_StopMode ENDP
				;223	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;224	_hijack_PrepareMode PROC
				;225			SNZ		F_PrepareMode
				_hijack_PrepareMode:
012F	3ADF	snz     HIJACK_RX_PARITY_COUNT[1].5
				;226			RET
0130	0003	ret
				;227			SNZ		F_CompleteRx1Bit
0131	39DF	snz     HIJACK_RX_PARITY_COUNT[1].3
				;228			RET
0132	0003	ret
				;229	;		INC		TEST_COUNT2
				;230			CLR		F_CompleteRx1Bit
0133	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;231	;Idle		
				;232			SNZ		F_0or1Bit
0134	3A5F	snz     HIJACK_RX_PARITY_COUNT[1].4
				;233			RET
0135	0003	ret
				;234			CLR		F_PrepareMode
0136	36DF	clr     HIJACK_RX_PARITY_COUNT[1].5
				;235			SET		F_IdleMode
0137	335F	set     HIJACK_RX_PARITY_COUNT[1].6
				;236			RET
0138	0003	ret
				;237	_hijack_PrepareMode ENDP
				;238	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;239	_hijack_StartIdleMode PROC
				;240			SNZ		F_IdleMode
				_hijack_StartIdleMode:
0139	3B5F	snz     HIJACK_RX_PARITY_COUNT[1].6
				;241			RET
013A	0003	ret
				;242	;Idle		
				;243			SNZ		F_CompleteRx1Bit
013B	39DF	snz     HIJACK_RX_PARITY_COUNT[1].3
				;244			RET
013C	0003	ret
				;245			CLR		F_CompleteRx1Bit
013D	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;246			SDZ		hijack_Idle_Count
013E	17DC	sdz     HIJACK_IDLE_COUNT
				;247			JMP		$1
013F	2947	jmp     L0147
				;248	$0:		
				;249			SZ		F_0or1Bit
0140	3E5F	sz      HIJACK_RX_PARITY_COUNT[1].4
				;250			JMP		$2
0141	2945	jmp     L0145
				;251			CLR		F_IdleMode
0142	375F	clr     HIJACK_RX_PARITY_COUNT[1].6
				;252			SET		F_ByteMode
0143	33DF	set     HIJACK_RX_PARITY_COUNT[1].7
				;253			RET
0144	0003	ret
				;254	$2:		
				;255			SET		F_hijack_Rx_Error	;第四bit 還是1，錯誤
				L0145:
0145	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;256			RET
0146	0003	ret
				;257	$1:		
				;258			SZ		F_0or1Bit		
				L0147:
0147	3E5F	sz      HIJACK_RX_PARITY_COUNT[1].4
				;259			RET						
0148	0003	ret
				;260			SET		F_hijack_Rx_Error	;3bit 1 Idle 不夠
0149	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;261			RET				
014A	0003	ret
				;262	_hijack_StartIdleMode ENDP
				;263	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;264	_hijack_ENDIdleMode PROC
				;265			SNZ		F_Stop_idleMode
				_hijack_ENDIdleMode:
014B	39E0	snz     HIJACK_RX_PARITY_COUNT[2].3
				;266			RET
014C	0003	ret
				;267			SNZ		F_CompleteRx1Bit
014D	39DF	snz     HIJACK_RX_PARITY_COUNT[1].3
				;268			RET
014E	0003	ret
				;269			CLR		F_CompleteRx1Bit
014F	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;270			INC		TEST_COUNT
0150	14D9	inc     TEST_COUNT
				;271			SDZ		hijack_Idle_Count
0151	17DC	sdz     HIJACK_IDLE_COUNT
				;272			JMP		$1
0152	2959	jmp     L0159
				;273	$0:		
				;274			SZ		F_0or1Bit
0153	3E5F	sz      HIJACK_RX_PARITY_COUNT[1].4
				;275			
				;276			CLR		F_IdleMode
0154	375F	clr     HIJACK_RX_PARITY_COUNT[1].6
				;277			SET		F_ByteMode
0155	33DF	set     HIJACK_RX_PARITY_COUNT[1].7
				;278			RET
0156	0003	ret
				;279	$2:		
				;280			SET		F_hijack_Rx_Error	;第四bit 還是1，錯誤
0157	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;281			RET
0158	0003	ret
				;282	$1:		
				;283	
				;284			SZ		F_0or1Bit		
				L0159:
0159	3E5F	sz      HIJACK_RX_PARITY_COUNT[1].4
				;285			RET						
015A	0003	ret
				;286			SET		F_hijack_Rx_Error	;3bit 1 Idle 不夠
015B	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;287			RET					
015C	0003	ret
				;288	_hijack_ENDIdleMode ENDP
				;289	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;290	_hijack_Rx_Byte PROC
				;291			SNZ		F_ByteMode
				_hijack_Rx_Byte:
015D	3BDF	snz     HIJACK_RX_PARITY_COUNT[1].7
				;292			RET
015E	0003	ret
				;293			SNZ		F_CompleteRx1Bit
015F	39DF	snz     HIJACK_RX_PARITY_COUNT[1].3
				;294			RET
0160	0003	ret
				;295			CLR		F_CompleteRx1Bit		
0161	35DF	clr     HIJACK_RX_PARITY_COUNT[1].3
				;296			SNZ		F_hijackstartOk
0162	3860	snz     HIJACK_RX_PARITY_COUNT[2].0
				;297			JMP		$0
0163	2965	jmp     L0165
				;298			JMP		hijack_Rx_ByteEnter
0164	2970	jmp     hijack_Rx_ByteEnter
				;299	$0:
				;300			SNZ		F_0or1Bit
				L0165:
0165	3A5F	snz     HIJACK_RX_PARITY_COUNT[1].4
				;301			JMP		$1
0166	2969	jmp     L0169
				;302			SET		F_hijack_Rx_Error
0167	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;303			RET
0168	0003	ret
				;304	$1:
				;305			SET		F_hijackstartOk
				L0169:
0169	3060	set     HIJACK_RX_PARITY_COUNT[2].0
				;306			MOV		A,16
016A	0F10	mov     a, 10H
				;307			MOV		hijack_Rx_Count,A
016B	00DD	mov     HIJACK_RX_COUNT, a
				;308			CLR		hijack_Receive_DataH
016C	1F4A	clr     HIJACK_RECEIVE_DATAH
				;309			CLR		hijack_Receive_DataL
016D	1F4B	clr     HIJACK_RECEIVE_DATAL
				;310			CLR		hijack_Rx_Parity_Count
016E	1F5E	clr     HIJACK_RX_PARITY_COUNT
				;311			RET										
016F	0003	ret
				;312	hijack_Rx_ByteEnter:
				;313			SDZ 	hijack_Rx_Count 	;16bit值是否已經讀取完成	
				hijack_Rx_ByteEnter:
0170	17DD	sdz     HIJACK_RX_COUNT
				;314			JMP		hijack_Rx_Byte_LOOP
0171	2976	jmp     hijack_Rx_Byte_LOOP
				;315			SET		F_CompleteRx1Bit
0172	31DF	set     HIJACK_RX_PARITY_COUNT[1].3
				;316			SET		F_Parity_StopMode	;進入下一個模式
0173	30E0	set     HIJACK_RX_PARITY_COUNT[2].1
				;317			CLR		F_ByteMode			
0174	37DF	clr     HIJACK_RX_PARITY_COUNT[1].7
				;318			RET
0175	0003	ret
				;319	hijack_Rx_Byte_LOOP:
				;320			CLR		C
				hijack_Rx_Byte_LOOP:
0176	340A	clr     C
				;321			RLC		hijack_Receive_DataL
0177	1ACB	rlc     HIJACK_RECEIVE_DATAL
				;322			RLC		hijack_Receive_DataH		
0178	1ACA	rlc     HIJACK_RECEIVE_DATAH
				;323			
				;324			SNZ		F_0or1Bit
0179	3A5F	snz     HIJACK_RX_PARITY_COUNT[1].4
				;325			JMP		hijack_Low
017A	297F	jmp     hijack_Low
				;326			JMP		hijack_High
017B	297C	jmp     hijack_High
				;327	hijack_High:
				;328			INC		hijack_Rx_Parity_Count
				hijack_High:
017C	14DE	inc     HIJACK_RX_PARITY_COUNT
				;329			SET		hijack_Receive_DataL.0
017D	304B	set     HIJACK_RECEIVE_DATAL.0
				;330			JMP		hijack_Next_Bit
017E	2980	jmp     hijack_Next_Bit
				;331	hijack_Low:
				;332			CLR		hijack_Receive_DataL.0
				hijack_Low:
017F	344B	clr     HIJACK_RECEIVE_DATAL.0
				;333	hijack_Next_Bit:
				;334			RET
				hijack_Next_Bit:
0180	0003	ret
				;335	_hijack_Rx_Byte ENDP
				;336	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;337	_hijack_Rx_1Bit PROC
				;338			SNZ		STMP0F
				_hijack_Rx_1Bit:
0181	3A11	snz     STMP0F
				;339			JMP		CCRA_interrupt
0182	298A	jmp     CCRA_interrupt
				;340	CCRP_interrupt:					
				;341			CLR		STMP0F
				CCRP_interrupt:
0183	3611	clr     STMP0F
				;342			INC		hijack_CCRP_count
0184	14D1	inc     HIJACK_CCRP_COUNT
				;343			MOV		A,hijack_CCRP_count
0185	0751	mov     a, HIJACK_CCRP_COUNT
				;344			XOR		A,hijack_Time_Out		
0186	0C28	xor     a, 28H
				;345			SNZ		Z
0187	390A	snz     Z
				;346			RET
0188	0003	ret
				;347			JMP		_hijack_Rx_1Bit_Error ;超出時間，錯誤
0189	29ED	jmp     _hijack_Rx_1Bit_Error
				;348	CCRA_interrupt:
				;349			SNZ		STMA0F
				CCRA_interrupt:
018A	3A91	snz     STMA0F
				;350			JMP		_hijack_Rx_1Bit_Error ;不是CCRA 中斷也不是CCRP中斷，錯誤
018B	29ED	jmp     _hijack_Rx_1Bit_Error
				;351			CLR		STMA0F
018C	3691	clr     STMA0F
				;352	;		INC		TEST_COUNT
				;353			MOV		A,00001000B
018D	0F08	mov     a, 8H
				;354			XORM	A,PA
018E	0494	xorm    a, PA
				;355			SZ		F_First_CCRA
018F	3C5F	sz      HIJACK_RX_PARITY_COUNT[1].0
				;356			JMP		Second_CCRA
0190	29AD	jmp     Second_CCRA
				;357	First_CCRA:	;第一次CCRA中斷 上升沿									
				;358			SET		F_First_CCRA
				First_CCRA:
0191	305F	set     HIJACK_RX_PARITY_COUNT[1].0
				;359			MOV		A,STM0AH					;Save CCRA value
0192	072D	mov     a, STM0AH
				;360			MOV		high_CCRA1_H,A	
0193	00D3	mov     HIGH_CCRA1_H, a
				;361			MOV		A,STM0AL					
0194	072C	mov     a, STM0AL
				;362			MOV		high_CCRA1_L,A	
0195	00D4	mov     HIGH_CCRA1_L, a
				;363			MOV		A,hijack_CCRP_count
0196	0751	mov     a, HIJACK_CCRP_COUNT
				;364			MOV		hijack_Period_L,A			;保存CCRP 的計數值
0197	00D8	mov     HIJACK_PERIOD_L, a
				;365			CLR		hijack_CCRP_count
0198	1F51	clr     HIJACK_CCRP_COUNT
				;366	;		INC		TEST_COUNT
				;367	;計算週期
				;368	;N x 512-high_First_CCRA_Count + high_Second_CCRA_Count
				;369	if stmCCRP_T==512
				;370			MOV		A,9
0199	0F09	mov     a, 9H
				;371			MOV		hijack_temp_count1,A 		;根據CCRP 的值修改移位的值
019A	00CF	mov     HIJACK_TEMP_COUNT1, a
				;372	endif
				;373	if stmCCRP_T==256
				;374			MOV		A,8
				;375			MOV		hijack_temp_count1,A 		;根據CCRP 的值修改移位的值
				;376	endif
				;377	$0:
				;378			CLR		C 							;移位進行乘法運算
				L019B:
019B	340A	clr     C
				;379			RLC		hijack_Period_L
019C	1AD8	rlc     HIJACK_PERIOD_L
				;380			RLC		hijack_Period_H	
019D	1AD7	rlc     HIJACK_PERIOD_H
				;381			SDZ		hijack_temp_count1
019E	17CF	sdz     HIJACK_TEMP_COUNT1
				;382			JMP		$0		
019F	299B	jmp     L019B
				;383			CLR		C							
01A0	340A	clr     C
				;384			MOV		A,high_CCRA1_L				;加上第二次取得的CCRA 的值
01A1	0754	mov     a, HIGH_CCRA1_L
				;385			ADDM	A,hijack_Period_L
01A2	03D8	addm    a, HIJACK_PERIOD_L
				;386			MOV		A,high_CCRA1_H
01A3	0753	mov     a, HIGH_CCRA1_H
				;387			ADCM	A,hijack_Period_H		
01A4	13D7	adcm    a, HIJACK_PERIOD_H
				;388			CLR		C 
01A5	340A	clr     C
				;389			MOV		A,hijack_Period_L			;減去第一次取得的 CCRA 的值
01A6	0758	mov     a, HIJACK_PERIOD_L
				;390			SUB		A,high_CCRA2_L
01A7	0256	sub     a, HIGH_CCRA2_L
				;391			MOV		hijack_Period_L,A
01A8	00D8	mov     HIJACK_PERIOD_L, a
				;392			MOV		A,hijack_Period_H
01A9	0757	mov     a, HIJACK_PERIOD_H
				;393			SBC		A,high_CCRA2_H
01AA	1255	sbc     a, HIGH_CCRA2_H
				;394			MOV		hijack_Period_H,A		
01AB	00D7	mov     HIJACK_PERIOD_H, a
				;395	
				;396			JMP		hijack_Period					
01AC	29C8	jmp     hijack_Period_0
				;397	Second_CCRA:;第二次CCRA中斷 上升沿
				;398			CLR		F_First_CCRA
				Second_CCRA:
01AD	345F	clr     HIJACK_RX_PARITY_COUNT[1].0
				;399			MOV		A,STM0AH					;Save CCRA value
01AE	072D	mov     a, STM0AH
				;400			MOV		high_CCRA2_H,A	;
01AF	00D5	mov     HIGH_CCRA2_H, a
				;401			MOV		A,STM0AL					;
01B0	072C	mov     a, STM0AL
				;402			MOV		high_CCRA2_L,A	;
01B1	00D6	mov     HIGH_CCRA2_L, a
				;403			MOV		A,hijack_CCRP_count
01B2	0751	mov     a, HIJACK_CCRP_COUNT
				;404			MOV		hijack_Period_L,A			;保存CCRP 的計數值
01B3	00D8	mov     HIJACK_PERIOD_L, a
				;405			CLR		hijack_CCRP_count
01B4	1F51	clr     HIJACK_CCRP_COUNT
				;406	;		INC		TEST_COUNT		
				;407	;計算週期
				;408	;N x 512-high_First_CCRA_Count + high_Second_CCRA_Count
				;409	if stmCCRP_T==512
				;410			MOV		A,9
01B5	0F09	mov     a, 9H
				;411			MOV		hijack_temp_count1,A 		;根據CCRP 的值修改移位的值
01B6	00CF	mov     HIJACK_TEMP_COUNT1, a
				;412	endif
				;413	if stmCCRP_T==256
				;414			MOV		A,8
				;415			MOV		hijack_temp_count1,A 		;根據CCRP 的值修改移位的值
				;416	endif
				;417	$0:
				;418			CLR		C 							;移位進行乘法運算
				L01B7:
01B7	340A	clr     C
				;419			RLC		hijack_Period_L
01B8	1AD8	rlc     HIJACK_PERIOD_L
				;420			RLC		hijack_Period_H	
01B9	1AD7	rlc     HIJACK_PERIOD_H
				;421			SDZ		hijack_temp_count1
01BA	17CF	sdz     HIJACK_TEMP_COUNT1
				;422			JMP		$0		
01BB	29B7	jmp     L01B7
				;423			CLR		C							
01BC	340A	clr     C
				;424			MOV		A,high_CCRA2_L				;加上第二次取得的CCRA 的值
01BD	0756	mov     a, HIGH_CCRA2_L
				;425			ADDM	A,hijack_Period_L
01BE	03D8	addm    a, HIJACK_PERIOD_L
				;426			MOV		A,high_CCRA2_H
01BF	0755	mov     a, HIGH_CCRA2_H
				;427			ADCM	A,hijack_Period_H		
01C0	13D7	adcm    a, HIJACK_PERIOD_H
				;428			CLR		C 
01C1	340A	clr     C
				;429			MOV		A,hijack_Period_L			;減去第一次取得的 CCRA 的值
01C2	0758	mov     a, HIJACK_PERIOD_L
				;430			SUB		A,high_CCRA1_L
01C3	0254	sub     a, HIGH_CCRA1_L
				;431			MOV		hijack_Period_L,A
01C4	00D8	mov     HIJACK_PERIOD_L, a
				;432			MOV		A,hijack_Period_H
01C5	0757	mov     a, HIJACK_PERIOD_H
				;433			SBC		A,high_CCRA1_H
01C6	1253	sbc     a, HIGH_CCRA1_H
				;434			MOV		hijack_Period_H,A		
01C7	00D7	mov     HIJACK_PERIOD_H, a
				;435	hijack_Period:		
				;436	;判斷是否是0
				;437	hijack_Period_0:
				;438	;		INC		TEST_COUNT				
				;439			MOV		A,hijack_Period_H
				hijack_Period_0:
				hijack_Period:
01C8	0757	mov     a, HIJACK_PERIOD_H
				;440			XOR		A,5					;hijack_Period0_Max 高八位
01C9	0C05	xor     a, 5H
				;441			SNZ		Z
01CA	390A	snz     Z
				;442			JMP		hijack_Period_1				;高Byte不相等，判斷是否為Bit 1
01CB	29D6	jmp     hijack_Period_1
				;443	;高位相等，判斷低八位是否在容差範圍內		
				;444	        MOV     A,hijack_Period_L
01CC	0758	mov     a, HIJACK_PERIOD_L
				;445	        SUB     A,94H +Tolerance 
01CD	0AD5	sub     a, D5H
				;446	        SZ      C		
01CE	3C0A	sz      C
				;447			JMP		_hijack_Rx_1Bit_Error		;週期太大錯誤
01CF	29ED	jmp     _hijack_Rx_1Bit_Error
				;448	        MOV     A,hijack_Period_L
01D0	0758	mov     a, HIJACK_PERIOD_L
				;449	        SUB     A,94H - Tolerance 
01D1	0A53	sub     a, 53H
				;450	        SNZ      C			
01D2	380A	snz     C
				;451			JMP		_hijack_Rx_1Bit_Error		;週期太小錯誤
01D3	29ED	jmp     _hijack_Rx_1Bit_Error
				;452			CLR		F_0or1Bit					;由週期判斷為Bit 0
01D4	365F	clr     HIJACK_RX_PARITY_COUNT[1].4
				;453			JMP		_hijack_Rx_1Bit_RET
01D5	29EB	jmp     _hijack_Rx_1Bit_RET
				;454	hijack_Period_1:	;是否在294H~316H之間		
				;455			MOV		A,hijack_Period_H
				hijack_Period_1:
01D6	0757	mov     a, HIJACK_PERIOD_H
				;456			XOR		A,2					;hijack_Period1_Max 高八位
01D7	0C02	xor     a, 2H
				;457			SZ		Z
01D8	3D0A	sz      Z
				;458			JMP		highByte2				;==2，判斷是否在294~300之間
01D9	29E4	jmp     highByte2
				;459	;是否==3
				;460			MOV		A,hijack_Period_H
01DA	0757	mov     a, HIJACK_PERIOD_H
				;461			XOR		A,3					;hijack_Period1_Max 高八位
01DB	0C03	xor     a, 3H
				;462			SZ		Z
01DC	3D0A	sz      Z
				;463			JMP		highByte3	
01DD	29DF	jmp     highByte3
				;464			JMP		_hijack_Rx_1Bit_Error	;高Byte既不是2也不是3，錯誤
01DE	29ED	jmp     _hijack_Rx_1Bit_Error
				;465	highByte3: ;300~316H
				;466	        MOV     A,hijack_Period_L
				highByte3:
01DF	0758	mov     a, HIJACK_PERIOD_L
				;467	        SUB     A,016H
01E0	0A16	sub     a, 16H
				;468	        SZ      C
01E1	3C0A	sz      C
				;469	        JMP		_hijack_Rx_1Bit_Error
01E2	29ED	jmp     _hijack_Rx_1Bit_Error
				;470	        JMP		thisis1		
01E3	29E9	jmp     thisis1
				;471	highByte2:		
				;472	;294H~300H之間
				;473	        MOV     A,hijack_Period_L
				highByte2:
01E4	0758	mov     a, HIJACK_PERIOD_L
				;474	        SUB     A,094H
01E5	0A94	sub     a, 94H
				;475	        SNZ      C
01E6	380A	snz     C
				;476	        JMP		_hijack_Rx_1Bit_Error
01E7	29ED	jmp     _hijack_Rx_1Bit_Error
				;477	        JMP		thisis1
01E8	29E9	jmp     thisis1
				;478	thisis1:
				;479			SET		F_0or1Bit
				thisis1:
01E9	325F	set     HIJACK_RX_PARITY_COUNT[1].4
				;480			JMP		_hijack_Rx_1Bit_RET				
01EA	29EB	jmp     _hijack_Rx_1Bit_RET
				;481	
				;482	_hijack_Rx_1Bit_RET:
				;483			SET		F_CompleteRx1Bit		
				_hijack_Rx_1Bit_RET:
01EB	31DF	set     HIJACK_RX_PARITY_COUNT[1].3
				;484			RET
01EC	0003	ret
				;485	_hijack_Rx_1Bit_Error:
				;486			SET		F_hijack_Rx_Error		;CCRP 連續發生的次數超過設定值(週期時間太長 Error)
				_hijack_Rx_1Bit_Error:
01ED	30DF	set     HIJACK_RX_PARITY_COUNT[1].1
				;487			RET								;置錯誤標誌位
01EE	0003	ret
				;488	_hijack_Rx_1Bit ENDP
				;489	
				;490	
				;491	
				;492		
				;493	
				;494	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;495	_hijack_init PROC
				;496	if stmCCRP_T==512
				;497			MOV		A,00000100B	;4/fsys  512 CCRP interrput
				_hijack_init:
01EF	0F04	mov     a, 4H
				;498			MOV		STM0C0,A
01F0	00A8	mov     STM0C0, a
				;499	endif
				;500	if stmCCRP_T==256
				;501			MOV		A,00000010B	;4/fsys  512 CCRP interrput
				;502			MOV		STM0C0,A
				;503	endif	
				;504			MOV		A,01000000B	;輸入捕捉模式、上升沿觸發、P 清除time
01F1	0F40	mov     a, 40H
				;505			MOV		STM0C1,A
01F2	00A9	mov     STM0C1, a
				;506			
				;507			SET		hijack_channel_L_IO
01F3	3315	set     PAC6
				;508			CLR		hijack_channel_L
01F4	3714	clr     PA6
				;509			
				;510			CLR		STP0IPS		;STP0I on PA6
01F5	3618	clr     STP0IPS
				;511			
				;512			SET		STMA0E		;開啟Timer 輸入捕捉模式中斷
01F6	3091	set     STMA0E
				;513			SET		STMP0E
01F7	3011	set     STMP0E
				;514			SET		MF0E
01F8	300F	set     MF0E
				;515			CLR		MF0F
01F9	360F	clr     MF0F
				;516			CLR		STMA0F
01FA	3691	clr     STMA0F
				;517			CLR		STMP0F
01FB	3611	clr     STMP0F
				;518			SET		ST0ON
01FC	31A8	set     ST0ON
				;519			SET		EMI
01FD	300E	set     EMI
				;520			RET
01FE	0003	ret
				;521	_hijack_init ENDP
				;522	
				;523	
				;524	
				;525	
				;526	;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;527	_hijack_Send_Byte PROC
				;528	;		local temp  D
				;529	 		CLR		hijack_channel_MIC
				_hijack_Send_Byte:
01FF	3514	clr     PA2
				;530	 		MOV		A,8 ;SET 8 BIT COUNTER
0200	0F08	mov     a, 8H
				;531	 		MOV		hijack_temp_count1,A
0201	00CF	mov     HIJACK_TEMP_COUNT1, a
				;532	hijack_send_8bitloop:
				;533			SZ		hijack_temp_Byte.7
				hijack_send_8bitloop:
0202	3FCE	sz      HIJACK_TEMP_BYTE.7
				;534			JMP		hijack_send_high
0203	2A05	jmp     hijack_send_high
				;535			JMP		hijack_send_low
0204	2A11	jmp     hijack_send_low
				;536	hijack_send_high:
				;537			INC		hijack_temp_count2		;奇校驗
				hijack_send_high:
0205	14D0	inc     HIJACK_TEMP_COUNT2
				;538			SET		hijack_channel_MIC
0206	3114	set     PA2
				;539			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0207	0F3C	mov     a, 3CH
0208	0001	clr     wdt
				L0209:
0209	1785	sdz     ACC
020A	2A09	jmp     L0209
				;540			CLR		hijack_channel_MIC
020B	3514	clr     PA2
				;541			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
020C	0F3C	mov     a, 3CH
020D	0001	clr     wdt
				L020E:
020E	1785	sdz     ACC
020F	2A0E	jmp     L020E
				;542			JMP		hijack_send_Next_Bit	
0210	2A1B	jmp     hijack_send_Next_Bit
				;543	hijack_send_low:		
				;544			SET		hijack_channel_MIC	;
				hijack_send_low:
0211	3114	set     PA2
				;545			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0212	0F78	mov     a, 78H
0213	0001	clr     wdt
				L0214:
0214	1785	sdz     ACC
0215	2A14	jmp     L0214
				;546			CLR		hijack_channel_MIC
0216	3514	clr     PA2
				;547			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值 		
0217	0F78	mov     a, 78H
0218	0001	clr     wdt
				L0219:
0219	1785	sdz     ACC
021A	2A19	jmp     L0219
				;548	hijack_send_Next_Bit:
				;549			RL		hijack_temp_Byte
				hijack_send_Next_Bit:
021B	18CE	rl      HIJACK_TEMP_BYTE
				;550			SDZ		hijack_temp_count1
021C	17CF	sdz     HIJACK_TEMP_COUNT1
				;551			JMP		hijack_send_8bitloop
021D	2A02	jmp     hijack_send_8bitloop
				;552	
				;553	_hijack_Send_Byte_RET:
				;554			RET 
				_hijack_Send_Byte_RET:
021E	0003	ret
				;555	_hijack_Send_Byte ENDP
				;556	;;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@	
				;557	hijack_send_odd_Bit PROC
				;558			SZ		hijack_temp_count2.0
				hijack_send_odd_Bit:
021F	3C50	sz      HIJACK_TEMP_COUNT2.0
				;559			JMP		hijack_send_odd_Bit_Low
0220	2A2C	jmp     hijack_send_odd_Bit_Low
				;560	;		JMP		hijack_odd_Bit_high	
				;561	hijack_send_odd_Bit_high:
				;562			SET		hijack_channel_MIC
				hijack_send_odd_Bit_high:
0221	3114	set     PA2
				;563			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0222	0F3C	mov     a, 3CH
0223	0001	clr     wdt
				L0224:
0224	1785	sdz     ACC
0225	2A24	jmp     L0224
				;564			CLR		hijack_channel_MIC
0226	3514	clr     PA2
				;565			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0227	0F3C	mov     a, 3CH
0228	0001	clr     wdt
				L0229:
0229	1785	sdz     ACC
022A	2A29	jmp     L0229
				;566			JMP		hijack_send_odd_Bit_RET		
022B	2A36	jmp     hijack_send_odd_Bit_RET
				;567	hijack_send_odd_Bit_Low:
				;568			SET		hijack_channel_MIC	;
				hijack_send_odd_Bit_Low:
022C	3114	set     PA2
				;569			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
022D	0F78	mov     a, 78H
022E	0001	clr     wdt
				L022F:
022F	1785	sdz     ACC
0230	2A2F	jmp     L022F
				;570			CLR		hijack_channel_MIC
0231	3514	clr     PA2
				;571			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0232	0F78	mov     a, 78H
0233	0001	clr     wdt
				L0234:
0234	1785	sdz     ACC
0235	2A34	jmp     L0234
				;572	hijack_send_odd_Bit_RET:
				;573			RET 							
				hijack_send_odd_Bit_RET:
0236	0003	ret
				;574	hijack_send_odd_Bit ENDP
				;575	;;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;576	_hijack_Send_Bias PROC
				;577	;用於先建立bias
				;578	 		MOV		A,12 ;SET 8 BIT COUNTER
				_hijack_Send_Bias:
0237	0F0C	mov     a, CH
				;579	 		MOV		hijack_temp_count1,A
0238	00CF	mov     HIJACK_TEMP_COUNT1, a
				;580	$1:		
				;581			SET		hijack_channel_MIC	;
				L0239:
0239	3114	set     PA2
				;582			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
023A	0F78	mov     a, 78H
023B	0001	clr     wdt
				L023C:
023C	1785	sdz     ACC
023D	2A3C	jmp     L023C
				;583			CLR		hijack_channel_MIC
023E	3514	clr     PA2
				;584			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值 		
023F	0F78	mov     a, 78H
0240	0001	clr     wdt
				L0241:
0241	1785	sdz     ACC
0242	2A41	jmp     L0241
				;585			SDZ		hijack_temp_count1
0243	17CF	sdz     HIJACK_TEMP_COUNT1
				;586			JMP		$1					
0244	2A39	jmp     L0239
				;587			RET
0245	0003	ret
				;588	_hijack_Send_Bias ENDP
				;589	;;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;590	_hijack_Send_Idle PROC
				;591	;,3bit 1頻率的idle信號，用於信號發送的開始和結束
				;592	 		MOV		A,3 					;SET 8 BIT COUNTER
				_hijack_Send_Idle:
0246	0F03	mov     a, 3H
				;593	 		MOV		hijack_temp_count1,A
0247	00CF	mov     HIJACK_TEMP_COUNT1, a
				;594	$1: 		
				;595			SET		hijack_channel_MIC	;
				L0248:
0248	3114	set     PA2
				;596			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0249	0F3C	mov     a, 3CH
024A	0001	clr     wdt
				L024B:
024B	1785	sdz     ACC
024C	2A4B	jmp     L024B
				;597			CLR		hijack_channel_MIC
024D	3514	clr     PA2
				;598			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
024E	0F3C	mov     a, 3CH
024F	0001	clr     wdt
				L0250:
0250	1785	sdz     ACC
0251	2A50	jmp     L0250
				;599			SDZ		hijack_temp_count1
0252	17CF	sdz     HIJACK_TEMP_COUNT1
				;600			JMP		$1
0253	2A48	jmp     L0248
				;601			RET	
0254	0003	ret
				;602	_hijack_Send_Idle ENDP
				;603	;;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;604	_hijack_Send_Start PROC
				;605	;1bit 0頻率 用於開始信號,		
				;606			SET		hijack_channel_MIC	;
				_hijack_Send_Start:
0255	3114	set     PA2
				;607			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0256	0F78	mov     a, 78H
0257	0001	clr     wdt
				L0258:
0258	1785	sdz     ACC
0259	2A58	jmp     L0258
				;608			CLR		hijack_channel_MIC
025A	3514	clr     PA2
				;609			DELAY	fskDelaycount0/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
025B	0F78	mov     a, 78H
025C	0001	clr     wdt
				L025D:
025D	1785	sdz     ACC
025E	2A5D	jmp     L025D
				;610			RET	
025F	0003	ret
				;611	_hijack_Send_Start ENDP
				;612	;;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
				;613	_hijack_Send_Stop PROC
				;614	;1bit 1頻率用於結束信號,		
				;615			SET		hijack_channel_MIC	;
				_hijack_Send_Stop:
0260	3114	set     PA2
				;616			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0261	0F3C	mov     a, 3CH
0262	0001	clr     wdt
				L0263:
0263	1785	sdz     ACC
0264	2A63	jmp     L0263
				;617			CLR		hijack_channel_MIC
0265	3514	clr     PA2
				;618			DELAY	fskDelaycount1/3		;Delay延遲了3倍，so fskDelaycount0/3為正確值
0266	0F3C	mov     a, 3CH
0267	0001	clr     wdt
				L0268:
0268	1785	sdz     ACC
0269	2A68	jmp     L0268
				;619			RET	
026A	0003	ret
				;620	_hijack_Send_Stop ENDP
				data .SECTION 'DATA'
				R_ATEMP DB DUP (?)
				R_STATUS DB DUP (?)
				IIC_DEVICE_ADDR DB DUP (?)
				IIC_RECEIVE_DATA DB DUP (?)
				IIC_SEND_DATA DB DUP (?)
				IIC_TEMP_CONUNT1 DB DUP (?)
				IIC_TEMP_CONUNT2 DB DUP (?)
				IIC_TEMP_BYTE DB DUP (?)
				HIJACK_RECEIVE_DATAH DB DUP (?)
				HIJACK_RECEIVE_DATAL DB DUP (?)
				HIJACK_SEND_DATA_HIGH DB DUP (?)
				HIJACK_SEND_DATA_LOW DB DUP (?)
				HIJACK_TEMP_BYTE DB DUP (?)
				HIJACK_TEMP_COUNT1 DB DUP (?)
				HIJACK_TEMP_COUNT2 DB DUP (?)
				HIJACK_CCRP_COUNT DB DUP (?)
				HIJACK_RX_STEP DB DUP (?)
				HIGH_CCRA1_H DB DUP (?)
				HIGH_CCRA1_L DB DUP (?)
				HIGH_CCRA2_H DB DUP (?)
				HIGH_CCRA2_L DB DUP (?)
				HIJACK_PERIOD_H DB DUP (?)
				HIJACK_PERIOD_L DB DUP (?)
				TEST_COUNT DB DUP (?)
				TEST_COUNT2 DB DUP (?)
				TEST_COUNT3 DB DUP (?)
				HIJACK_IDLE_COUNT DB DUP (?)
				HIJACK_RX_COUNT DB DUP (?)
				HIJACK_RX_PARITY_COUNT DB DUP (?)
				F_EMI DB DUP (?) ; F_EMI
				IIC_TEMP_FLAG DB DUP (?) ; IIC_TEMP_FLAG
				F_FIRST_CCRA DB DUP (?) ; F_FIRST_CCRA
				F_HIJACK_RX_ERROR DB DUP (?) ; F_HIJACK_RX_ERROR
				F_HIJACK_RX_START DB DUP (?) ; F_HIJACK_RX_START
				F_COMPLETERX1BIT DB DUP (?) ; F_COMPLETERX1BIT
				F_0OR1BIT DB DUP (?) ; F_0OR1BIT
				F_PREPAREMODE DB DUP (?) ; F_PREPAREMODE
				F_IDLEMODE DB DUP (?) ; F_IDLEMODE
				F_BYTEMODE DB DUP (?) ; F_BYTEMODE
				F_HIJACKSTARTOK DB DUP (?) ; F_HIJACKSTARTOK
				F_PARITY_STOPMODE DB DUP (?) ; F_PARITY_STOPMODE
				F_PARITY_OK DB DUP (?) ; F_PARITY_OK
				F_STOP_IDLEMODE DB DUP (?) ; F_STOP_IDLEMODE
				F_FIRST_PARITY_STOPMODE DB DUP (?) ; F_FIRST_PARITY_STOPMODE
